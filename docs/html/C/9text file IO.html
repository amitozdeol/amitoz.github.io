<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="https://unpkg.com/sakura.css/css/sakura.css" type="text/css">
</head>
<body>
  <div id="app"><h1 id="text-file-i-o">Text file I/O</h1>
<h2 id="write-read">Write/Read</h2>
<pre><code class="lang-c">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

// C provides numerous methods for working with files
// A file is just a block of memory with a name
// The file can be stored across many blocks in memory, 
// but the C compiler acts as if it is in sequence.

// In this tutorial I will cover how to work with files
// if we represent them as text files. next time I&#39;ll cover how
// to use Binary File I/O


int main(){

    int randomNumber;

    // Will store the pointer to the file

    FILE *pFile;

    // Opens a text file so we can write data to it.
    // It returns a pointer to the file
    // w - If a file doesn&#39;t exist create it. If it does overwrite it
    // a - Open or create text file and append to original content
    // r - Open a file to read from it
    // r+ - Open for reading and writing
    // w+ - Open or create, delete original and read and write
    // a+ - Open or create, append for writing and reading

    pFile = fopen(&quot;randomnumbers.txt&quot;, &quot;w&quot;);

    // If the file wasn&#39;t opened a 1 is returned from fopen()

    if(!pFile){

        printf(&quot;Error : Couldn&#39;t Write to File\n&quot;);

        return 1;

    }

    // Print 10 random numbers to the file

    for(int i = 0; i &lt; 10; i++){

        randomNumber = rand() % 100;

        // fprintf() prints to the file supplied just like
        // printf() prints to the screen

        fprintf(pFile, &quot;%d\n&quot;, randomNumber);

    }

    printf(&quot;Success Writing to File\n&quot;);

    // Closes the text file
    // This must be done or eventually the program will run 
    // out of file handlers or memory


    if(fclose(pFile) != 0)
        printf(&quot;Error : File Not Closed\n&quot;);

    return 0;
}

int main(){

    // Defining that we only expect there to be a maximum of 1,000
    // characters per lines read.

    char buffer[1000];

    FILE *pFile;

    // Opens the file for reading

    pFile = fopen(&quot;randomnumbers.txt&quot;, &quot;r&quot;);

    // fopen returns 1 if an error occurred 

    if(!pFile){

        printf(&quot;Error : Couldn&#39;t Read the File\n&quot;);

        return 1;

    }

    // fgets() reads up to 1,000 characters per line until
    // fgets() returns the value of NULL when it reaches 
    // the end of the file.

    // while(fgets(buffer, 1000, pFile) != NULL){

    //    printf(&quot;%s&quot;, buffer);

    // }


    // You can also read from a file using fscanf
    // You pass the file, data type to read and the buffer
    // to store it in. You can check for valid data because 
    // fscanf() returns a number other then 1 if it isn&#39;t 
    // a string


    while(fscanf(pFile, &quot;%s&quot;, buffer) == 1){

        // Puts outputs the string plus a newline.
        // Returns a nonnegative integer if it was successful
        // and EOF if there was an error

        puts(buffer);

    }


    printf(&quot;Success Reading from File\n&quot;);

    // Closes the text file

    if(fclose(pFile) != 0)
        printf(&quot;Error : File Not Closed\n&quot;);

    return 0;
}
</code></pre>
<h2 id="move-inside-a-file">Move inside a file</h2>
<pre><code class="lang-c">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

int main(){

    FILE * pFile;

    pFile = fopen(&quot;randomwords.txt&quot;, &quot;r+&quot;);

    char buffer[1000];

    // If the file wasn&#39;t opened a 1 is returned from fopen()

    if(!pFile){

        printf(&quot;Error : Couldn&#39;t Write to File\n&quot;);

        return 1;

    }

    fputs(&quot;Messing With Strings&quot;, pFile);

    // Move 12 spaces from the beginning of the file
    // SEEK_SET - Move starting from the beginning of the file
    // SEEK_CUR - Move based off of the current position in the file
    // SEEK_END - Move based off of starting at the end of the file

    fseek(pFile, 12, SEEK_SET);

    // Overwrite characters starting at char number 12

    fputs(&quot; Files  &quot;, pFile);

    printf(&quot;Success Writing to File\n&quot;);

    // Move back to the beginning of the file

    fseek(pFile, 0, SEEK_SET);

    // 2 : Move to the end of the file

    fseek(pFile, 0, SEEK_END);

    // ftell() tells you how far you are currently from the
    // beginning of the file

    long numberOfBytes = ftell(pFile);

    printf(&quot;Number of Bytes in File : %d\n&quot;, numberOfBytes);

    // 3 : This moves backwards 20 bytes in the file

    fseek(pFile, -20, SEEK_CUR);

    while(fgets(buffer, 1000, pFile) != NULL){

        printf(&quot;%s&quot;, buffer);

    }

    printf(&quot;\n&quot;);

    // Closes the text file
    // This must be done or eventually the program will run 
    // out of file handlers or memory

    if(fclose(pFile) != 0)
        printf(&quot;Error : File Not Closed\n&quot;);

    return 0;
}
</code></pre>
</div>
</body>
</html>