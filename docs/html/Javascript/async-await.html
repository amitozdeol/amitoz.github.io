<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="https://unpkg.com/sakura.css/css/sakura.css" type="text/css">
</head>
<body>
  <div id="app"><ul>
<li><a href="#async-await">Async Await</a><ul>
<li><a href="#callback-and-promises">Callback and promises</a></li>
<li><a href="#async-functions">Async functions -</a></li>
</ul>
</li>
<li><a href="#real-world-example---currency-convertor">Real world example - Currency convertor</a></li>
</ul>
<h1 id="async-await">Async Await</h1>
<h2 id="callback-and-promises">Callback and promises</h2>
<p>Old way to do asynchronous code using <strong>Callbacks</strong> and <strong>Promises</strong> -</p>
<pre><code class="lang-javascript">const promiseFunction = new Promise((resolve, reject) =&gt; {
  const add = (a, b) =&gt; a + b;
  resolve(add(2, 2));
});
promiseFunction.then((response) =&gt; {
  console.log(response);
}).catch((error) =&gt; {
  console.log(error);
});
</code></pre>
<h2 id="async-functions-">Async functions -</h2>
<p>Async function provide us with a clean and concise syntax that enables us to write less code to accomplish the same outcome we would get with promises. Async is nothing more than syntactic sugar for promises.</p>
<p>Async functions are created by prepending the word async before the function declaration like this:</p>
<pre><code class="lang-javascript">// Async/Await
const asyncGreeting = async () =&gt; &#39;Greetings&#39;;
// Promises
const promiseGreeting = () =&gt; new Promise(((resolve) =&gt; {
  resolve(&#39;Greetings&#39;);
}));
asyncGreeting().then(result =&gt; console.log(result));
promiseGreeting().then(result =&gt; console.log(result));
</code></pre>
<h1 id="real-world-example-currency-convertor">Real world example - Currency convertor</h1>
<p>Take in currency code we want to convert from and currency code we want to convert to, as well as the amount of money. Output the correct exchange rate based on the data from the APIs.</p>
<pre><code class="lang-javascript">/** Get exhange rate from one currency to another **/
const getExchangeRate = async (fromCurrency, toCurrency) =&gt; {
    //await keyword pause async function
    const response = await axios.get(&#39;http://data.fixer.io/api/latest?    access_key=[yourAccessKey]&amp;format=1&#39;);
    const rate = response.data.rates;
    const euro = 1 / rate[fromCurrency];
    const exchangeRate = euro * rate[toCurrency];
    return exchangeRate;
}

/** Recieve list of countries where this currency can be used **/
const getCountries = async (currencyCode) =&gt; {
    const response = await axios.get(`https://restcountries.eu/rest/v2/currency/${currencyCode}`);
    return response.data.map(country =&gt; country.name);
}


const convert = async (fromCurrency, toCurrency, amount) =&gt; {
    const exchangeRate = await getExchangeRate(fromCurrency, toCurrency);
    const countries = await getCountries(toCurrency);
    const convertedAmount = (amount * exchangeRate).toFixed(2);
    return `${amount} ${fromCurrency} is worth ${convertedAmount} ${toCurrency}. You can spend these in the following countries: ${countries}`;
}
</code></pre>
<p>Now when type </p>
<pre><code class="lang-javascript">convertCurrency(&#39;USD&#39;, &#39;HRK&#39;, 20)
  .then((message) =&gt; {
    console.log(message);
  }).catch((error) =&gt; {
    console.log(error.message);
  });

  //OUTPUT
  20 USD is worth 129.90 HRK. You can spend these in the following countries: Croatia
</code></pre>
</div>
</body>
</html>